---
// src/pages/admin/create.astro
import Layout from '../../layouts/Layout.astro';

export const prerender = false;

const { cookies, redirect } = Astro;
const isAuthenticated = cookies.get('admin_auth')?.value === 'true';
if (!isAuthenticated) {
  throw redirect('/admin/login');
}
---

<Layout>
  <section class="min-h-screen bg-white text-black px-6 py-12">
    <div class="max-w-2xl mx-auto space-y-8">
      <h1 class="text-3xl font-bold text-blue-900 text-center">Criar Novo Projeto</h1>

      <form method="POST" action="/api/create-project" class="space-y-4">
        <div>
          <label class="block font-semibold mb-1">Nome do Projeto</label>
          <input type="text" name="projectName" required class="w-full border p-3 rounded" />
        </div>
        <div>
          <label class="block font-semibold mb-1">Número de Amostras</label>
          <input type="number" name="sampleCount" required class="w-full border p-3 rounded" />
        </div>
        <button type="submit" class="bg-blue-900 text-white px-6 py-3 rounded hover:bg-blue-800">Salvar e Gerar QR Codes</button>
      </form>

      <p class="text-sm text-gray-600 text-center pt-4">Após salvar, você será redirecionado para a lista de projetos.</p>
    </div>
  </section>
</Layout>
